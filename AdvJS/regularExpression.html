<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RE</title>
    <link rel="stylesheet" href="bootstrap-4.6.2-dist/css/bootstrap.min.css">
</head>
<body>
        <div class="container p-4 mt-5">
                <div class="form-group">
                  <label for="">Name</label>
                  <input type="text" name="" id="userName" class="form-control" placeholder="" aria-describedby="helpId">
                  <small  class=""></small>
                </div>
                <div class="form-group">
                    <label for="">Email</label>
                    <input type="text" name="" id="userEmail" class="form-control" placeholder="" aria-describedby="helpId">
                    <small  class=""></small>
                  </div>
                  <div class="form-group">
                    <label for="">Password</label>
                    <input type="text" name="" id="userPassword" class="form-control" placeholder="" aria-describedby="helpId">
                    <small  class=""></small>
                  </div>
                  <div class="form-group">
                    <label for="">Confirm Password</label>
                    <input type="text" name="" id="userConfirmPassword" class="form-control" placeholder="" aria-describedby="helpId">
                    <small  class=""></small>
                  </div>
                  <button id="sub" class="btn btn-info">Register</button>
        </div>
    <script src="jquery/jquery-3.7.1.js"></script>
    <script src="bootstrap-4.6.2-dist/js/bootstrap.min.js"></script>
    <script>
        // userName validation
            $("#userName").keyup(function(){
                let uName = $(this).val();
                // console.log(uName);
                let uNameRE = /^[a-zA-Z\s]{3,10}$/;
                if(!uNameRE.test(uName)){
                        // console.log('invalid');
                        $(this).css('border','2px solid red');
                        $(this).next('small').show().text('please enter valid data').css('color','red');
                }
                else{
                    // console.log('valid');
                    $(this).css('border','2px solid green');
                    $(this).next('small').hide();
                }
            });

//          user Email Validation
            $("#userEmail").keyup(function(){
                let uEmail = $(this).val();
                let uEmailRE = /^[a-z0-9_.]{4,10}[@][a-z]{5}[.][a-z]{3}$/;
                if(!uEmailRE.test(uEmail)){
                        $(this).css('border','2px solid red');
                        $(this).next('small').show().text('please enter correct email format').css('color','red');
                }
                else{
                    $(this).css('border','2px solid green');
                    $(this).next('small').hide();
                }
            })

            // password
          $("#userPassword").keyup(function(){
            let uPassword = $(this).val();
            let uPasswordRE = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^a-zA-Z\d]).{8,15}$/;
            if(!uPasswordRE.test(uPassword)){
                    $(this).css('border',"2px solid red");
                    $(this).next('small').show().text('a least one lower case one upper case one digit and one special character').css('color','red');
            }
            else{
                        $(this).css('border','2px solid green');
                        $(this).next('small').hide();
            }
          })
          $("#userConfirmPassword").keyup(function(){
            let confirmPassword = $(this).val();
            let confirmPasswordRE = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^a-zA-Z\d]).{8,15}$/;
            let uPassword = $("#userPassword").val();
            if(!confirmPasswordRE.test(confirmPassword)){
                $(this).css('border',"2px solid red");
                $(this).next('small').show().text('not follow RE').css('color','red'); 
            }       
            else{
                if(uPassword != confirmPassword){
                 $(this).css('border',"2px solid red");
                $(this).next('small').show().text('password not matched').css('color','red');                 
            }
            else{
                $(this).css('border','2px solid green');
                $(this).next('small').hide();
            }           
            }
          });
        //   function
         function emptyFields(inpVal){
            console.log(inpVal);
                if($(inpVal).val() == ""){
                    $(inpVal).css('border',"2px solid red");
                    $(inpVal).next('small').show().text('please filled out this field').css('color','red');   
                }
          }
          $("#sub").click(function(){
            let uName = $("#userName").val();
            let uEmail = $("#userEmail").val();
            let uPassword = $("#userPassword").val();
            let uConfirmPassword = $("#userConfirmPassword").val();
            emptyFields("#userName");
            emptyFields("#userEmail");
            emptyFields("#userPassword");
            emptyFields("#userConfirmPassword");
            console.log(uName);
            let uNameRE = /^[a-zA-Z\s]{3,10}$/;
            let uEmailRE = /^[a-z0-9_.]{4,10}[@][a-z]{5}[.][a-z]{3}$/;
            let uPasswordRE = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^a-zA-Z\d]).{8,15}$/;
            let users = JSON.parse(localStorage.getItem('students')) || [];
            if(uNameRE.test(uName) && uEmailRE.test(uEmail) && uPasswordRE.test(uPassword)){
                users.push({name:uName,email:uEmail,password:uPassword});
                localStorage.setItem('students',JSON.stringify(users));
                alert('added');
                location.assign('select.html');
            }
            else{
                alert("invalid data");
            }       
          })


    </script>
</body>
</html>